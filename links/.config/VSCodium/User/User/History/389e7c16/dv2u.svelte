<script lang="ts">
  import { Container } from 'lucide-svelte';
  import AnimatedBeam from './AnimatedBeam.svelte';
  import Circle from './Circle.svelte';

  let containerRef: HTMLDivElement | null = $state(null);

  // Circles
  let svelteCircleRef: SVGSVGElement | null = $state(null);
  let mySqlCircleRef: SVGSVGElement | null = $state(null);
  let nodeJsCircleRef: SVGSVGElement | null = $state(null);
  let dockerCircleRef: SVGSVGElement | null = $state(null);
  let clientCircleRef: SVGSVGElement | null = $state(null);
</script>

<div
  class="flex h-full flex-col items-center justify-between rounded-xl border border-border bg-secondary"
>
  <div
    bind:this={containerRef}
    class="relative flex h-full w-full grow flex-col items-center justify-center p-6"
  >
    <!-- Main Component  -->

    <div class="z-10 flex h-full w-full max-w-lg flex-row items-center justify-between gap-10">
      <div class="flex h-full flex-col justify-evenly gap-2">
        <!-- Svelte -->
        <Circle>
          <svg
            bind:this={svelteCircleRef}
            viewBox="0 0 256 308"
            class="size-full"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid"
            ><path
              d="M239.682 40.707C211.113-.182 154.69-12.301 113.895 13.69L42.247 59.356a82.198 82.198 0 0 0-37.135 55.056 86.566 86.566 0 0 0 8.536 55.576 82.425 82.425 0 0 0-12.296 30.719 87.596 87.596 0 0 0 14.964 66.244c28.574 40.893 84.997 53.007 125.787 27.016l71.648-45.664a82.182 82.182 0 0 0 37.135-55.057 86.601 86.601 0 0 0-8.53-55.577 82.409 82.409 0 0 0 12.29-30.718 87.573 87.573 0 0 0-14.963-66.244"
              fill="#FF3E00"
            /><path
              d="M106.889 270.841c-23.102 6.007-47.497-3.036-61.103-22.648a52.685 52.685 0 0 1-9.003-39.85 49.978 49.978 0 0 1 1.713-6.693l1.35-4.115 3.671 2.697a92.447 92.447 0 0 0 28.036 14.007l2.663.808-.245 2.659a16.067 16.067 0 0 0 2.89 10.656 17.143 17.143 0 0 0 18.397 6.828 15.786 15.786 0 0 0 4.403-1.935l71.67-45.672a14.922 14.922 0 0 0 6.734-9.977 15.923 15.923 0 0 0-2.713-12.011 17.156 17.156 0 0 0-18.404-6.832 15.78 15.78 0 0 0-4.396 1.933l-27.35 17.434a52.298 52.298 0 0 1-14.553 6.391c-23.101 6.007-47.497-3.036-61.101-22.649a52.681 52.681 0 0 1-9.004-39.849 49.428 49.428 0 0 1 22.34-33.114l71.664-45.677a52.218 52.218 0 0 1 14.563-6.398c23.101-6.007 47.497 3.036 61.101 22.648a52.685 52.685 0 0 1 9.004 39.85 50.559 50.559 0 0 1-1.713 6.692l-1.35 4.116-3.67-2.693a92.373 92.373 0 0 0-28.037-14.013l-2.664-.809.246-2.658a16.099 16.099 0 0 0-2.89-10.656 17.143 17.143 0 0 0-18.398-6.828 15.786 15.786 0 0 0-4.402 1.935l-71.67 45.674a14.898 14.898 0 0 0-6.73 9.975 15.9 15.9 0 0 0 2.709 12.012 17.156 17.156 0 0 0 18.404 6.832 15.841 15.841 0 0 0 4.402-1.935l27.345-17.427a52.147 52.147 0 0 1 14.552-6.397c23.101-6.006 47.497 3.037 61.102 22.65a52.681 52.681 0 0 1 9.003 39.848 49.453 49.453 0 0 1-22.34 33.12l-71.664 45.673a52.218 52.218 0 0 1-14.563 6.398"
              fill="#FFF"
            /></svg
          >
        </Circle>
        <!-- MySQL -->
        <Circle>
          <svg bind:this={mySqlCircleRef} class="size-full" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 1.5C4.96243 1.5 2.5 2.44143 2.5 3.60275V12.4343C2.5 13.5956 4.96243 14.537 8 14.537C11.0376 14.537 13.5 13.5956 13.5 12.4343V3.60275C13.5 2.44143 11.0376 1.5 8 1.5Z" fill="#FAF5FF"/>
            <ellipse cx="8" cy="3.60275" rx="5.5" ry="2.10275" stroke="#834DF0"/>
            <path d="M13.5 12.4343C13.5 13.5956 11.0376 14.537 8 14.537C4.96243 14.537 2.5 13.5956 2.5 12.4343" stroke="#834DF0"/>
            <path d="M13.5 9.49045C13.5 10.6518 11.0376 11.5932 8 11.5932C4.96243 11.5932 2.5 10.6518 2.5 9.49045" stroke="#834DF0"/>
            <path d="M13.5 6.5466C13.5 7.70792 11.0376 8.64935 8 8.64935C4.96243 8.64935 2.5 7.70792 2.5 6.5466" stroke="#834DF0"/>
            <path d="M13.5 3.39249V12.5184" stroke="#834DF0"/>
            <path d="M2.5 3.39249V12.5184" stroke="#834DF0"/>
          </svg>
        </Circle>
        <!-- NodeJs -->
        <Circle>
          <svg bind:this={nodeJsCircleRef} class="size-full" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.39619 15.7304C7.58149 15.8371 7.7914 15.8925 8.00275 15.8925L8.00217 15.8895C8.21642 15.8895 8.42633 15.8345 8.61162 15.7274L14.3934 12.3877C14.7669 12.1705 15 11.7667 15 11.3338V4.66025C15 4.22597 14.7669 3.82208 14.3934 3.60638L8.61162 0.265259C8.24827 0.058248 7.76187 0.058248 7.39562 0.265259L1.60656 3.60493C1.23162 3.81918 1 4.22452 1 4.65881V11.3324C1 11.7652 1.23162 12.1705 1.60656 12.3877L3.12367 13.2621C3.85906 13.624 4.12253 13.624 4.45693 13.624C5.5441 13.624 6.16948 12.9653 6.16948 11.8188V5.22917C6.16948 5.13508 6.0942 5.06269 6.003 5.06269H5.2705C5.1764 5.06269 5.10257 5.13508 5.10257 5.22917V11.8159C5.10257 12.3254 4.57709 12.8321 3.7172 12.4022L2.13349 11.4873C2.07848 11.4569 2.04374 11.3961 2.04374 11.3324V4.65881C2.04374 4.59511 2.07935 4.53286 2.13537 4.50101L7.91517 1.16568C7.96873 1.13383 8.03966 1.13383 8.09323 1.16568L13.8742 4.50101C13.9289 4.53431 13.9636 4.59366 13.9636 4.66025V11.3338C13.9636 11.3975 13.9289 11.4598 13.8753 11.4902L8.09207 14.8284C8.04242 14.8573 7.96641 14.8573 7.91285 14.8284L6.42961 13.9482C6.38546 13.9222 6.329 13.9135 6.28587 13.9381C5.87546 14.1712 5.79744 14.2016 5.41295 14.3362C5.31784 14.3691 5.17713 14.4261 5.46549 14.5874L7.39619 15.7304Z" fill="#369650"/>
            <path d="M6.72799 9.1582C6.72799 10.1325 7.25855 11.294 9.789 11.294L9.78061 11.3008C11.6133 11.3008 12.6643 10.5785 12.6643 9.31903C12.6643 8.06973 11.8203 7.73677 10.0426 7.50081C8.24757 7.2634 8.06517 7.14035 8.06517 6.71909C8.06517 6.37166 8.22006 5.90842 9.55043 5.90842C10.7389 5.90842 11.1761 6.16465 11.3571 6.96519C11.373 7.04047 11.441 7.09548 11.5192 7.09548H12.2705C12.3168 7.09548 12.3617 7.07521 12.3936 7.04191C12.4254 7.00717 12.4428 6.96085 12.4384 6.91307C12.3226 5.53204 11.4048 4.88929 9.55333 4.88929C7.90448 4.88929 6.92009 5.58415 6.92009 6.75094C6.92009 8.01761 7.89869 8.36649 9.48239 8.52284C11.3759 8.70813 11.5235 8.98463 11.5235 9.35667C11.5235 10.003 11.0053 10.2784 9.7864 10.2784C8.25625 10.2784 7.9204 9.89446 7.80749 9.1333C7.79446 9.0518 7.72497 8.99172 7.64246 8.99172H6.89549C6.80269 8.99172 6.72799 9.06555 6.72799 9.1582Z" fill="#369650"/>
          </svg>
        </Circle>
      </div>
      <div class="flex flex-col justify-center">
        <!-- Docker -->
        <Circle>
          <svg bind:this={dockerCircleRef} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"
            ><path
              fill="#3a4d54"
              fill-rule="evenodd"
              d="M73.8 50.8h11.3v11.5h5.7c2.6 0 5.3-.5 7.8-1.3c1.2-.4 2.6-1 3.8-1.7c-1.6-2.1-2.4-4.7-2.6-7.3c-.3-3.5.4-8.1 2.8-10.8l1.2-1.4l1.4 1.1c3.6 2.9 6.5 6.8 7.1 11.4c4.3-1.3 9.3-1 13.1 1.2l1.5.9l-.8 1.6c-3.2 6.2-9.9 8.2-16.4 7.8c-9.8 24.3-31 35.8-56.8 35.8c-13.3 0-25.5-5-32.5-16.8l-.1-.2l-1-2.1c-2.4-5.2-3.1-10.9-2.6-16.6l.2-1.7h9.6V50.8h11.3V39.6h22.5V28.3h13.5z"
              clip-rule="evenodd"
            /><path
              fill="#00aada"
              d="M110.4 55.1c.8-5.9-3.6-10.5-6.4-12.7c-3.1 3.6-3.6 13.2 1.3 17.2c-2.8 2.4-8.5 4.7-14.5 4.7H18.6c-.6 6.2.5 11.9 3 16.8l.8 1.5c.5.9 1.1 1.7 1.7 2.6c3 .2 5.7.3 8.2.2c4.9-.1 8.9-.7 12-1.7c.5-.2.9.1 1.1.5c.2.5-.1.9-.5 1.1c-.4.1-.8.3-1.3.4c-2.4.7-5 1.1-8.3 1.3h-.6c-1.3.1-2.7.1-4.2.1c-1.6 0-3.1 0-4.9-.1c6 6.8 15.4 10.8 27.2 10.8c25 0 46.2-11.1 55.5-35.9c6.7.7 13.1-1 16-6.7c-4.5-2.7-10.5-1.8-13.9-.1"
            /><path
              fill="#28b8eb"
              d="M110.4 55.1c.8-5.9-3.6-10.5-6.4-12.7c-3.1 3.6-3.6 13.2 1.3 17.2c-2.8 2.4-8.5 4.7-14.5 4.7h-68c-.3 9.5 3.2 16.7 9.5 21c4.9-.1 8.9-.7 12-1.7c.5-.2.9.1 1.1.5c.2.5-.1.9-.5 1.1c-.4.1-.8.3-1.3.4c-2.4.7-5.2 1.2-8.5 1.4l-.1-.1c8.5 4.4 20.8 4.3 35-1.1c15.8-6.1 30.6-17.7 40.9-30.9c-.2.1-.4.1-.5.2"
            /><path
              fill="#028bb8"
              d="M18.7 71.8c.4 3.3 1.4 6.4 2.9 9.3l.8 1.5c.5.9 1.1 1.7 1.7 2.6c3 .2 5.7.3 8.2.2c4.9-.1 8.9-.7 12-1.7c.5-.2.9.1 1.1.5c.2.5-.1.9-.5 1.1c-.4.1-.8.3-1.3.4c-2.4.7-5.2 1.2-8.5 1.4h-.4c-1.3.1-2.7.1-4.1.1c-1.6 0-3.2 0-4.9-.1c6 6.8 15.5 10.8 27.3 10.8c21.4 0 40-8.1 50.8-26H18.7z"
            /><path
              fill="#019bc6"
              d="M23.5 71.8c1.3 5.8 4.3 10.4 8.8 13.5c4.9-.1 8.9-.7 12-1.7c.5-.2.9.1 1.1.5c.2.5-.1.9-.5 1.1c-.4.1-.8.3-1.3.4c-2.4.7-5.2 1.2-8.6 1.4c8.5 4.4 20.8 4.3 34.9-1.1c8.5-3.3 16.8-8.2 24.2-14.1z"
            /><path
              fill="#00acd3"
              fill-rule="evenodd"
              d="M28.4 52.7h9.8v9.8h-9.8zm.8.8h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm3-12h9.8v9.8h-9.8zm.9.8h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#23c2ee"
              fill-rule="evenodd"
              d="M39.6 52.7h9.8v9.8h-9.8zm.9.8h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#00acd3"
              fill-rule="evenodd"
              d="M50.9 52.7h9.8v9.8h-9.8zm.8.8h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#23c2ee"
              fill-rule="evenodd"
              d="M50.9 41.5h9.8v9.8h-9.8zm.8.8h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm3.1 10.4H72v9.8h-9.8zm.8.8h.8v8.1H63zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#00acd3"
              fill-rule="evenodd"
              d="M62.2 41.5H72v9.8h-9.8zm.8.8h.8v8.1H63zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#23c2ee"
              fill-rule="evenodd"
              d="M62.2 30.2H72V40h-9.8zm.8.8h.8v8.1H63zm1.5 0h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#00acd3"
              fill-rule="evenodd"
              d="M73.5 52.7h9.8v9.8h-9.8zm.8.8h.8v8.1h-.8zm1.4 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8zm1.5 0h.8v8.1h-.8z"
              clip-rule="evenodd"
            /><path
              fill="#d4eef1"
              fill-rule="evenodd"
              d="M48.8 78.3c1.5 0 2.7 1.2 2.7 2.7s-1.2 2.7-2.7 2.7s-2.7-1.2-2.7-2.7s1.2-2.7 2.7-2.7"
              clip-rule="evenodd"
            /><path
              fill="#3a4d54"
              fill-rule="evenodd"
              d="M48.8 79.1c.2 0 .5 0 .7.1c-.2.1-.4.4-.4.7c0 .4.4.8.8.8c.3 0 .6-.2.7-.4c.1.2.1.5.1.7c0 1.1-.9 1.9-1.9 1.9c-1.1 0-1.9-.9-1.9-1.9s.8-1.9 1.9-1.9M1.1 72.8h125.4c-2.7-.7-8.6-1.6-7.7-5.2c-5 5.7-16.9 4-20 1.2c-3.4 4.9-23 3-24.3-.8c-4.2 5-17.3 5-21.5 0c-1.4 3.8-21 5.7-24.3.8c-3 2.8-15 4.5-20-1.2c1.1 3.5-4.9 4.5-7.6 5.2"
              clip-rule="evenodd"
            /><path
              fill="#bfdbe0"
              d="M56 97.8c-6.7-3.2-10.3-7.5-12.4-12.2c-2.5.7-5.5 1.2-8.9 1.4c-1.3.1-2.7.1-4.1.1c-1.7 0-3.4 0-5.2-.1c6 6 13.6 10.7 27.5 10.8z"
            /><path
              fill="#d4eef1"
              d="M46.1 89.9c-.9-1.3-1.8-2.8-2.5-4.3c-2.5.7-5.5 1.2-8.9 1.4c2.3 1.2 5.7 2.4 11.4 2.9"
            /></svg
          >
        </Circle>
      </div>
      <div class="flec-col flex justify-center">
        <!-- Client -->
        <Circle>
          <svg class="size-full" bind:this={clientCircleRef} viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.99951 7C9.65637 7 10.9995 5.65685 10.9995 4C10.9995 2.34315 9.65637 1 7.99951 1C6.34266 1 4.99951 2.34315 4.99951 4C4.99951 5.65685 6.34266 7 7.99951 7Z" fill="#EBECF0"/>
            <path d="M2.10272 13.008C2.39906 11.3034 3.54766 8 7.99969 8C12.4517 8 13.6003 11.3034 13.8967 13.008C13.9912 13.5521 13.552 14 12.9997 14H2.99969C2.4474 14 2.00813 13.5521 2.10272 13.008Z" fill="#EBECF0"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9995 4C10.9995 5.65685 9.65637 7 7.99951 7C6.34266 7 4.99951 5.65685 4.99951 4C4.99951 2.34315 6.34266 1 7.99951 1C9.65637 1 10.9995 2.34315 10.9995 4ZM9.99951 4C9.99951 5.10457 9.10408 6 7.99951 6C6.89494 6 5.99951 5.10457 5.99951 4C5.99951 2.89543 6.89494 2 7.99951 2C9.10408 2 9.99951 2.89543 9.99951 4Z" fill="#6C707E"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99969 8C3.54766 8 2.39906 11.3034 2.10272 13.008C2.00813 13.5521 2.4474 14 2.99969 14H12.9997C13.552 14 13.9912 13.5521 13.8967 13.008C13.6003 11.3034 12.4517 8 7.99969 8ZM11.7438 10.5114C12.4081 11.2951 12.7281 12.2552 12.8778 13H3.12154C3.27126 12.2552 3.59131 11.2951 4.25563 10.5114C4.94028 9.70375 6.05804 9 7.99969 9C9.94134 9 11.0591 9.70375 11.7438 10.5114Z" fill="#6C707E"/>
          </svg>
        </Circle>
      </div>
    </div>

    <AnimatedBeam bind:containerRef bind:fromRef={svelteCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={mySqlCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={nodeJsCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={dockerCircleRef} bind:toRef={clientCircleRef} />
  </div>

  <!-- Footer -->
  <div class="p-6 pt-0">
    <span class="text-base font-medium text-neutral-700 dark:text-neutral-300">
      <Container class="inline size-[18px] align-middle" />
      Docker powered
    </span>
    <span class="text-base text-neutral-500"
      >Deploy anywhere with our Docker containers. Simple setup, seamless scaling.</span
    >
  </div>
</div>
